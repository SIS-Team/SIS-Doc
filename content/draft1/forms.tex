\subsection{Formulare} \label{sec:content_draft_form}
Für die Generierung der Formulare wurde die Idee aus dem Projekt übernommen, welches von Marco Handle im letzten Jahr im Rahmen eines FTKL-Projektes entwickelt wurde.\\
Die Generierung ist so konzipiert, dass es auf einfachste Wege möglich ist, verschiedene Formulare mit den verschiedensten Input-Feldern zu generieren.\\
Da es jedoch nicht möglich ist alle beliebige Formulare zu generieren, musste für die Generierung der Suppliereingabe und der Eingabe der Stundenpläne eine eigene Routine entwickelt werden, auch die Eingabe für die Monitore wurde eigens entwickelt. Alle anderen Eingaben wurden mit der selben Routine entwickelt.\\
Der Grundgedanke bei dieser Eingabemethode besteht darin, dass man alle schon vorhandenen Einträge sieht. Ein weiterer Gedanke war, dass alle Einträge in Zeilen angeordnet werden. So werden Beispielsweise alle Lehrer, bei der Eingabe der Lehrer, untereinander in Zeilen angezeigt. In jeder einzelnen Zeile sind die entsprechenden Felder zum Bearbeiten eines Eintrages nebeneinander angeordnet. Außerdem wurde darauf wert gelegt, dass die Eingabe so gut es geht ohne Java Script auskommen. Die \enquote{normalen} Eingaben wurden gänzlich ohne Java Script realisiert. Einzig bei der Suppliereingabe und der Eingabe der Stundenpläne konnte auf Java Script nicht verzichtet werden.\\
Bearbeitet man eine Zeile, so muss jede einzelne Zeile gespeichert werden. Für das Eintragen eines neuen Eintrages steht an letzter Stelle der Eingabe eine leere Zeile zur Verfügung. Falls Zeilen gelöscht werden können, dann ist neben dem Übernehmen-Button noch eine Checkbox verfügbar zum Löschen verfügbar. (Genaue Beschreibung der einzelnen Eingaben siehe Anleitung für Administratoren.)\\
Um die Formulare vor webseitenübergreifenden Angriffen (siehe \gref{sec:content_security_xsrf}) zu schützen, wurde die unter \gref{sec:content_draft_token} beschriebene Klasse verwendet.
\paragraph{Prinzip}
Es wurde eine Funktion geschrieben, mit der eine Zeile des Formulars angelegt werden kann. Dieser Funktion gibt man den Aufbau der Zeile und den Inhalt der Zeile als Information mit.\\
Für den Aufbau der Formularzeile muss ein dementsprechendes Array zuvor definiert werden. In diesem werden Informationen für jedes einzelne Input-Feld in der Formularzeile hinterlegt. Dabei handelt es sich um Informationen wie Name, Anzeigename, Typ, Größe, sonstige Einstellungen und vordefinierter Wert. Es wurden die am häufig verwendeten  Input-Felder als Auswahl für den Typ realisiert:
\begin{itemize}
	\item Hidden-Feld
	\item Textfeld
	\item Textarea
	\item Checkbox
	\item Date-Feld
	\item Dropdown
	\item Button
\end{itemize}
Wird der oben genannten Funktion ein Inhalt mitgegeben, muss dieser Inhalt eine Zeile einer SQL Abfrage entsprechen, dieser wird dann automatisch in die Input-Felder übernommen. Wird jedoch kein Inhalt mitgegeben, dann werden die Input-Felder leer generiert. Da ein Aufruf der Funktion jeweils nur eine Zeile erzeugt, muss diese Funktion für jede Zeile erneut aufgerufen werden.
\paragraph{Spezialfall Dropdown}
Das Dropdown-Feld stellte einen Spezialfall dar, da es in HTML dafür nur ein Dropdown-Feld gibt, bei dem jedoch nur die vorgegebenen Werte ausgewählt werden können, dies wäre in unserem Sinne. Das Problem dabei war jedoch, dass man in diesen Dropdown-Feldern nicht einen Buchstaben eintippen konnte, um einen Lehrer oder ein Fach schneller zu finden. Nach einigen Recherchen im Internet wurde eine neue Input Methode von HTML5 gefunden, welches einem Listenfeld entspricht. Dabei ist das sichtbare Feld eine gewöhnliche Textbox, welcher standardmäßig Einträge zur Auswahl hinterlegt werden. Gibt nun der Benutzter einen Buchstaben ein, so werden nur mehr die Einträge angezeigt, welche sich mit dem Buchstaben bilden können. Dieses Listenfeld hat jedoch einen großen Nachteil, da es nun auch möglich ist benutzerdefinierte Eingaben zu tätigen, dies ist nicht in unserem Sinne, deshalb musste eine Funktion entwickelt werden, welche die Eingabe auf Plausibilität überprüft. Um dieses Listenfeld zu benützen muss der Browser jedoch HTML5 und diesen Input-Typ unterstützen. Jeder, von uns getestete Browser, unterstützte dies.
\subsubsection{Eingabe der Supplierungen}
Da sich herausstellte, dass diese Eingabe nicht mit der oben genannten Methode generiert werden kann, wurde eine ähnliche Methode entwickelt. Diese Funktion beruht im wesentlichen auf der obigen Funktion, jedoch wurde sie abgeändert, dass diese Funktion Input-Felder mit verschiedenen Eigenschaften und 2 Zeilen auf einmal erstellen kann, welche für einen Eintrag nötig sind. Außerdem ist diese Funktion so ausgelegt, dass sie die Felder, Zeilen usw. automatisch mit den Richtigen Nummern nummeriert, um auf sie mittels JavaScript zugreifen zu können.\\
In Absprache mit Herrn Stecher wurde die optimale Lösung für die Eingabe der Supplierungen entwickelt. Dabei war eine der größten Vorgaben, dass sie sehr ähnlich dem letztjährigen FTKL-Projekt sein sollte und so intuitiv und einfach wie möglich, da die Eingabe in SIS nicht wesentlich mehr Aufwand sein sollte, als zur herkömmlichen Methode.\\
Da es nicht möglich ist jeden erdenklichen Fall zu berücksichtigen, wurde beschlossen die Eingabe der Supplierungen in eine \enquote{normale} und eine \enquote{freie} Methode zu unterteilen. (siehe Anleitung für Administratoren Abschnitt Supplierungen)
\subsubsection{Eingabe der Stundenpläne}
Das Format zur Eingabe der Stundenpläne sollte so komfortabel wie möglich gestaltet werden, da dies eine zusätzliche Eingabe am Anfang des Schuljahres darstellt. Diese Eingabe wurde ebenfalls mit Herrn Stecher konzipiert und abgesprochen.\\
Wir entschieden uns für eine Eingabe, bei der jeder Tag auf einer eigenen Seite dargestellt wird und zwischen denen gewechselt werden muss. Die Eingabe ist so aufgebaut, dass von Anfang an alle 16 Stunden sichtbar sind.\\ 
Ein weiteres Kriterium, welches sich im Laufe der Entwicklung zeigte, war, dass es die Möglichkeit von einer Teilung einer Klasse gibt. Dies wurde so gelöst, dass nach Absprache mit Herrn Stecher beschlossen wurde maximal 7 Teilungen einer Klasse zuzulassen. Um wie oben schon einmal erwähnt so gut es geht von Java Script fern zu bleiben, werden alle benötigten Zeilen beim Laden der Seite erstellt. Die vorerst nicht benötigten Zeilen werden ausgeblendet, wenn sie benötigt, werden sie mit Java Script sichtbar gemacht.\\
Um die Übersichtlichkeit der Eingabe zu bewahren, werden bei mehrstündigen Stunden, die Stunden ausgeblendet, die nicht mehr benötigt werden, dafür ist wiederum Java Script notwendig.
\subsubsection{Generierung der Listenfeldinhalte}
Um es so redundanzfrei wie möglich zu Programmieren wurde eine Funktion entwickelt, die für die mitgegebenen Tabellen Listen erstellt, die anschließend mit den Listenfelder verknüpft werden können.\\
Der große Vorteil ist, dass nicht zu jedem Listenfeld, das mehrfach auf einer Seite vorkommen kann, eine Datenbankabfrage und eine Liste erstellt werden muss. Diese Methode senkte die Größe der generierten HTML Seite auf ein Bruchteil. Am Anfang der Entwicklung wurden auch überflüssige Listen erstellt, dies verursachte auch viel Traffic und große HTML Dateien.
\subsubsection{Datumsauswahl}
Da es bei den Supplierungen und den Fehlenden nicht Übersichtlich ist, wenn alle Einträge in einer Liste sichtbar sind, musste eine Lösung gefunden werden, welche zur besseren Übersicht beiträgt. Hier wurde ebenfalls die Methode aus dem FTKL Projekt übernommen. Dabei werden die Einträge von jeweils nur einem Tag angezeigt. Mit einer Auswahl kann dabei zwischen den Tagen gewechselt werden. Um zu verhindern, dass versehentlich fehlende oder Supplierungen für Wochenenden eingetragen werden, wurde beschlossen diese Tage automatisch zu überspringen.
\subsubsection{Monitorformular}
\input{content/draft1/monitorform}